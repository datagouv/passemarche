<section class="fr-accordion" data-controller="accordion">
  <h3 class="fr-accordion__title">
    <button class="fr-accordion__btn"
            data-accordion-target="button"
            data-action="click->accordion#toggle"
            aria-expanded="false"
            aria-controls="accordion-cat-<%= category_key %>">
      <%= I18n.t("form_fields.buyer.categories.#{category_key}", default: category_key.humanize) %>
    </button>
  </h3>
  <div class="fr-collapse" id="accordion-cat-<%= category_key %>" data-accordion-target="content">
    <%= render 'admin/socle_de_base/buyer_candidate_labels',
               buyer_label: I18n.t("form_fields.buyer.categories.#{category_key}", default: category_key.humanize),
               candidate_label: I18n.t("form_fields.candidate.categories.#{category_key}", default: category_key.humanize) %>

    <div class="fr-accordions-group fr-mt-2w">
      <% subcategories.each do |subcategory_key, fields| %>
        <%= render 'admin/socle_de_base/subcategory_accordion',
                   subcategory_key: subcategory_key,
                   fields: fields %>
      <% end %>
    </div>
  </div>
</section>
