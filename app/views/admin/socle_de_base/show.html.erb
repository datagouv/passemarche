<%= content_for :page_title, @presenter.field_name %>

<div class="fr-container fr-my-4w">
  <div class="fr-mb-3w">
    <%= link_to admin_socle_de_base_index_path, class: "fr-link fr-link--icon-left fr-icon-arrow-left-line" do %>
      <%= t('admin.socle_de_base.show.back') %>
    <% end %>
  </div>

  <div class="fr-grid-row fr-grid-row--middle fr-mb-4w">
    <div class="fr-col">
      <h1 class="fr-h2 fr-mb-1w"><%= @presenter.field_name %></h1>
      <div class="fr-badges-group">
        <% @presenter.market_type_badges.each do |badge| %>
          <span class="fr-badge fr-badge--sm<%= ' fr-badge--blue-cumulus' if badge[:active] %>"
                <% unless badge[:active] %>style="opacity: 0.4"<% end %>>
            <%= t("admin.socle_de_base.market_type_badges.#{badge[:code]}") %>
          </span>
        <% end %>
        <span class="fr-badge fr-badge--sm <%= @presenter.source_badge_class %>">
          <%= @presenter.source_badge %>
        </span>
      </div>
    </div>
    <div class="fr-col-auto">
      <%= link_to t('admin.socle_de_base.show.archive_button'),
            archive_admin_socle_de_base_path(@market_attribute),
            method: :patch,
            data: { turbo_method: :patch, turbo_confirm: t('admin.socle_de_base.show.archive_confirm') },
            class: "fr-btn fr-btn--secondary fr-btn--icon-left fr-icon-archive-line" %>
    </div>
  </div>

  <div class="fr-card fr-mb-4w">
    <div class="fr-card__body">
      <div class="fr-card__content">
        <h2 class="fr-h4"><%= t('admin.socle_de_base.show.general_info') %></h2>
        <div class="fr-grid-row fr-grid-row--gutters">
          <div class="fr-col-4">
            <p class="fr-text--bold fr-mb-1v"><%= t('admin.socle_de_base.show.field_type') %></p>
            <p><%= @presenter.input_type_label %></p>
          </div>
          <div class="fr-col-4">
            <p class="fr-text--bold fr-mb-1v"><%= t('admin.socle_de_base.show.mandatory') %></p>
            <span class="fr-badge fr-badge--sm <%= @presenter.mandatory_badge_class %>">
              <%= @presenter.mandatory_badge %>
            </span>
          </div>
          <div class="fr-col-4">
            <p class="fr-text--bold fr-mb-1v"><%= t('admin.socle_de_base.show.market_types') %></p>
            <% @presenter.market_types.each do |mt| %>
              <span class="fr-badge fr-badge--sm fr-badge--blue-cumulus"><%= mt.code.humanize %></span>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="fr-card fr-mb-4w">
    <div class="fr-card__body">
      <div class="fr-card__content">
        <h2 class="fr-h4"><%= t('admin.socle_de_base.show.description') %></h2>
        <div class="fr-grid-row fr-grid-row--gutters">
          <div class="fr-col-6">
            <div class="fr-card fr-card--sm fr-mb-2w">
              <div class="fr-card__body">
                <div class="fr-card__content">
                  <h3 class="fr-h6"><%= t('admin.socle_de_base.show.buyer_view') %></h3>
                  <dl>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.category') %></dt>
                    <dd><%= @presenter.buyer_category_label %></dd>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.subcategory') %></dt>
                    <dd><%= @presenter.buyer_subcategory_label %></dd>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.title_field') %></dt>
                    <dd><%= @presenter.buyer_name %></dd>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.description_field') %></dt>
                    <dd><%= @presenter.buyer_description || '—' %></dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>
          <div class="fr-col-6">
            <div class="fr-card fr-card--sm fr-mb-2w">
              <div class="fr-card__body">
                <div class="fr-card__content">
                  <h3 class="fr-h6"><%= t('admin.socle_de_base.show.candidate_view') %></h3>
                  <dl>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.category') %></dt>
                    <dd><%= @presenter.candidate_category_label %></dd>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.subcategory') %></dt>
                    <dd><%= @presenter.candidate_subcategory_label %></dd>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.title_field') %></dt>
                    <dd><%= @presenter.candidate_name %></dd>
                    <dt class="fr-text--bold"><%= t('admin.socle_de_base.show.description_field') %></dt>
                    <dd><%= @presenter.candidate_description || '—' %></dd>
                  </dl>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="fr-card fr-mb-4w">
    <div class="fr-card__body">
      <div class="fr-card__content">
        <h2 class="fr-h4"><%= t('admin.socle_de_base.show.configuration') %></h2>
        <p class="fr-text--bold fr-mb-1v"><%= t('admin.socle_de_base.show.mode') %></p>
        <% if @presenter.from_api? %>
          <p><%= t('admin.socle_de_base.show.mode_api') %> — <%= @presenter.api_name %></p>
          <p class="fr-text--bold fr-mb-1v"><%= t('admin.socle_de_base.show.api_key') %></p>
          <p><%= @presenter.api_key %></p>
        <% else %>
          <p><%= t('admin.socle_de_base.show.mode_manual') %></p>
        <% end %>
      </div>
    </div>
  </div>

  <div class="fr-btns-group fr-btns-group--inline">
    <%= link_to t('admin.socle_de_base.edit.title'), edit_admin_socle_de_base_path(@market_attribute),
          class: "fr-btn" %>
  </div>
</div>
