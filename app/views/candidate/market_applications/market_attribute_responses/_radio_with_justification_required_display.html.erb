<%
  key = market_attribute_response.market_attribute.key
  radio_choice = market_attribute_response.radio_choice
  text = market_attribute_response.text
  documents = market_attribute_response.documents
%>

<div class="field-layout-container">
  <div class="field-layout-content">
    <strong>
      <%= t("form_fields.candidate.fields.#{key}.name", default: key.humanize) %>
    </strong>
    <br>

    <span class="fr-text--sm fr-text--mention-grey">
      <% if radio_choice == 'yes' %>
        <div class="fr-badge fr-badge--success fr-badge--sm fr-mb-1w">Oui</div>

        <% if text.present? || documents.attached? %>
          <% if text.present? %>
            <div class="fr-mb-2w">
              <strong class="fr-text--sm">Précisions :</strong><br>
              <%= simple_format(text, class: "fr-text--sm") %>
            </div>
          <% end %>

          <% if documents.attached? %>
            <div>
              <strong class="fr-text--sm">Documents joints :</strong><br>
              <% documents.each do |doc| %>
                <span class="fr-icon--sm fr-icon-file-fill fr-mr-1v" aria-hidden="true"></span>
                <%= link_to doc.filename.to_s,
                            url_for(doc),
                            target: "_blank", rel: "noopener" %>
                (<%= number_to_human_size(doc.byte_size) %>)
                <br>
              <% end %>
            </div>
          <% end %>
        <% else %>
          <span class="fr-text--sm">Aucune information complémentaire fournie</span>
        <% end %>
      <% else %>
        <div class="fr-badge fr-badge--sm fr-mb-1w">Non</div>

        <% if documents.attached? %>
          <div>
            <strong class="fr-text--sm">Documents justificatifs :</strong><br>
            <% documents.each do |doc| %>
              <span class="fr-icon--sm fr-icon-file-fill fr-mr-1v" aria-hidden="true"></span>
              <%= link_to doc.filename.to_s,
                          url_for(doc),
                          target: "_blank", rel: "noopener" %>
              (<%= number_to_human_size(doc.byte_size) %>)
              <br>
            <% end %>
          </div>
        <% else %>
          <span class="fr-text--sm fr-text--error">Aucun document justificatif fourni</span>
        <% end %>
      <% end %>
    </span>
  </div>
</div>
