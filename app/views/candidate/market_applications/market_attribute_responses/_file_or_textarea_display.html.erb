<%
  documents = market_attribute_response.documents
  text_value = market_attribute_response.value['text'] || ''
%>

<div class="fr-upload-group fr-mb-4w">
  <div class="fr-text fr-mb-2w">
    <strong>
      <%= t("form_fields.candidate.fields.#{market_attribute_response.market_attribute.key}.name",
            default: market_attribute_response.market_attribute.key.humanize) %>
      <%= render 'candidate/market_applications/market_attribute_responses/source_badge', market_attribute_response: market_attribute_response %>
    </strong>
  </div>

  <% unless market_attribute_response.auto? %>
    <% if text_value.present? %>
      <div class="fr-text fr-mb-2w">
        <strong>Description :</strong>
        <p><%= simple_format(text_value) %></p>
      </div>
    <% end %>

    <span class="fr-text--sm fr-text--mention-grey">
      <% if documents.attached? %>
        <div>
          <% documents.each do |doc| %>
            <span class="fr-icon--sm fr-icon-file-fill fr-mr-1v" aria-hidden="true"></span>
            <%= link_to doc.filename.to_s,
                        url_for(doc),
                        target: "_blank", rel: "noopener" %>
            (<%= number_to_human_size(doc.byte_size) %>)
            <br>
          <% end %>
        </div>
      <% else %>
        <span>Aucun fichier téléchargé</span>
      <% end %>
    </span>

    <% if text_value.blank? && !documents.attached? %>
      <p class="fr-text--sm fr-mt-2w">Aucune description ni fichier fourni.</p>
    <% end %>
  <% end %>
</div>
