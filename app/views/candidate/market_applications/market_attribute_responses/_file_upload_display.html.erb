<%
  file_info = market_attribute_response.file
  has_document = market_attribute_response.document.attached?
  display_value = file_info&.dig('name') || 'Aucun fichier téléchargé'
%>

<div class="field-layout-container">
  <div class="field-layout-content">
    <strong>
      <%= t("form_fields.candidate.fields.#{market_attribute_response.market_attribute.key}.name",
            default: market_attribute_response.market_attribute.key.humanize) %>
    </strong>
    <br>
    <span class="fr-text--sm fr-text--mention-grey">
      <% if has_document %>
        <div>
          <span class="fr-icon--sm fr-icon-file-fill fr-mr-1v" aria-hidden="true"></span>
          <%= link_to market_attribute_response.document.filename.to_s,
                      url_for(market_attribute_response.document),
                      target: "_blank", rel: "noopener" %>
          <% if file_info&.dig('size').present? %>
            (<%= number_to_human_size(file_info['size']) %>)
          <% end %>
        </div>
      <% else %>
        <span>Aucun fichier téléchargé</span>
      <% end %>
    </span>
  </div>
</div>
