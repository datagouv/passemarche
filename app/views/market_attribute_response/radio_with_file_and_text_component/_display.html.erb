<div class="field-layout-container">
  <div class="field-layout-content">
    <div class="fr-grid-row fr-mb-2w">
      <div class="fr-col">
        <strong><%= component.field_label %></strong>

        <% if component.display_value? %>
          <%# Simplified display for API-fetched data with display_value (like ESS) %>
          <br>
          <span class="fr-text--md"><strong><%= component.display_label %></strong> <%= component.display_value %></span>
        <% elsif component.show_value? %>
          <br>

          <% if component.radio_yes? %>
            <% # Display details except for BODACC auto (motif exclusion contestations) %>
            <% is_bodacc = component.market_attribute_response.market_attribute.api_name == 'bodacc' %>
            <% show_details = !is_bodacc || !component.market_attribute_response.auto? %>

            <% if show_details %>
              <% if component.text? %>
                <div class="fr-mb-2w">
                  <strong class="fr-text--sm"><%= component.response_label %></strong><br>
                  <%= component.formatted_text %>
                </div>
              <% end %>

              <% if component.documents_attached? %>
                <div>
                  <strong class="fr-text--sm"><%= component.attached_documents_label %></strong><br>
                  <% component.documents.each do |document| %>
                    <%= render MarketAttributeResponse::Shared::DocumentItemComponent.new(
                      document: document,
                      market_application: component.market_attribute_response.market_application,
                      context: component.context,
                      naming_service: component.naming_service
                    ) %>
                  <% end %>
                </div>
              <% end %>

              <% if !component.text? && !component.documents_attached? %>
                <span class="fr-text--md"><%= component.no_info_message %></span>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      </div>

      <div class="fr-col-auto field-badge-container">
        <% unless component.display_value? %>
          <% if component.show_value? %>
            <div class="<%= component.badge_class %>"><%= component.badge_label %></div>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
  <div class="field-layout-badge">
    <%= render SourceBadgeComponent.new(market_attribute_response: component.market_attribute_response) %>
  </div>
</div>
<hr class="fr-hr">
