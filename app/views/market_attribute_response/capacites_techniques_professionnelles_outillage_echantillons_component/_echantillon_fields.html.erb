<div class="nested-form-wrapper fr-card fr-card--sm fr-mb-2w" data-new-record="<%= index == 'NEW_RECORD' %>">
  <div class="fr-card__body">
    <div class="fr-card__content">
      <div class="fr-grid-row fr-grid-row--gutters fr-mb-2w" style="align-items: center;">
        <div class="fr-col-8" style="display: flex; align-items: center;">
          <h6 class="fr-text--sm fr-mb-0" style="margin-bottom: 0;">
            <% if display_number %>
              Echantillon <%= display_number %>
            <% else %>
              Nouvel echantillon
            <% end %>
          </h6>
        </div>
        <div class="fr-col-4" style="display: flex; align-items: center; justify-content: flex-end;">
          <%= response_form.hidden_field "echantillon_#{index}__destroy", value: '0' %>
          <div class="fr-mt-0">
            <%= nested_form_delete_button("cet echantillon") %>
          </div>
        </div>
      </div>

      <div class="fr-grid-row fr-grid-row--gutters">
        <div class="fr-col-12">
          <div class="fr-input-group">
            <%= response_form.label "echantillon_#{index}_description", "Description de l'echantillon", class: "fr-label" %>
            <span class="fr-hint-text">Decrivez l'echantillon, la photographie ou la fourniture que vous souhaitez presenter</span>
            <%= response_form.text_area "echantillon_#{index}_description",
              value: index == 'NEW_RECORD' ? '' : component.get_item_field(index, 'description'),
              class: "fr-input",
              placeholder: "ex: Echantillon de mobilier urbain conforme aux normes PMR, dimensions 120x80cm, materiau acier inoxydable",
              rows: 3 %>
          </div>
        </div>
      </div>

      <div class="fr-grid-row fr-grid-row--gutters fr-mt-2w">
        <div class="fr-col-8">
          <% files = index == 'NEW_RECORD' ? nil : component.echantillon_fichiers(index) %>
          <%= direct_upload_field documents: files,
                                  market_application_identifier: component.market_attribute_response.market_application.identifier,
                                  deletable: true,
                                  form: response_form,
                                  field_name: "echantillon_#{index}_fichiers" do %>
            <%= response_form.label "echantillon_#{index}_fichiers", "Fichiers (photos, documents)", class: "fr-label" %>
            <span class="fr-hint-text">Format accepte : PDF, JPG, PNG. Taille maximale : 10 Mo par fichier. Vous pouvez joindre plusieurs fichiers.</span>
            <%= response_form.file_field "echantillon_#{index}_fichiers",
                  class: "fr-upload",
                  direct_upload: true,
                  accept: ".pdf,.jpg,.jpeg,.png",
                  multiple: true %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
